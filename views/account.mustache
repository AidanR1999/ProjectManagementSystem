{{>header}}

<div class="container">
  <div class="row">
    <div class="col-sm"></div>
    <div class="col-sm">
    <h1>  Account Details</h1>
      <form action="/update" method="post">
        <div class="form-group">
            <label>Email:</label>
            <input type="text" class="form-control" placeholder="Email" id="email" name="email" value="{{email}}" disabled>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label>First Name:</label>
                <input type="text" class="form-control" placeholder="First Name" id="firstName" name="firstName" value="{{firstName}}">
            </div>
            <div class="form-group col-sm-6">
                <label>Last Name:</label>
                <input type="text" class="form-control" placeholder="Last Name" id="lastName" name="lastName" value="{{lastName}}">
            </div>
        </div>
        <div class="row">
                <div class="col-md-8"></div>
                <div class="col-md"> 
                    <button type="submit" class="btn btn-primary">Update</button>
                </div>
            </div>
        </form>
        <form action="/changepassword" method="post" onsubmit="return checkPassword()" style="border: solid 2px blue; padding: 5%;">
            <h1>Change Password</h1>
            <div class="form-group">
                <label>New Password:</label>
                <input type="password" class="form-control" placeholder="New Password" id="pass" name="password">
            </div>
            <div class="form-group">
                <label>Confirm New Password:</label>
                <input type="password" class="form-control" placeholder="Confirm new Password" id="confirmPassword" name="confirmPassword">
            </div>
            <div class="row">
                <div class="col-md-8"></div>
                <div class="col-md"> 
                    <button type="submit" class="btn btn-warning">Change</button>
                </div>
            </div>
        </form>
        <form action="/deleteaccount" method="post" style="border: solid 2px red; padding: 5%;">
            <h1>Delete Account</h1>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md">
                    <button type="submit" class="btn btn-danger .confirm">Delete</button>
                </div>
                <div class="col-md-4"></div>
            </div>
        </form>
    </div>
    <div class="col-sm"></div>
  </div>
</div>

<script>
    $(function() {
        $('.confirm').click(function(e) {
            e.preventDefault();
            if (window.confirm("Are you sure?")) {
                location.href = this.href;
            }
        });
    });

    function checkPassword() {
		var password = document.getElementById("pass").value;
		console.log(password);
		var confPassword = document.getElementById("confirmPassword").value;
		console.log(confPassword);
		if (password != confPassword) {
			alert("Passwords must match");
			console.log("false");
			return false;
		} else {
			document.register.submit();
			console.log("true");
			return;
		}
	}
</script>

{{>footer}}